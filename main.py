from fastapi import FastAPI

from agent import get_agent

app = FastAPI()

sample_email_body = """<div style="word-spacing:normal;background-color:#f5f5f5"><div style="background-color:#f5f5f5"><span class="im"><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:20px 0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="center" style="font-size:0;padding:10px 25px;word-break:break-word"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:collapse;border-spacing:0"><tbody><tr><td style="width:153px"><a href="https://www.centris.ca/en?utm_source=alert&amp;utm_medium=email&amp;utm_content=website" style="color:#5bb6bd;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en?utm_source%3Dalert%26utm_medium%3Demail%26utm_content%3Dwebsite&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw35WsshgHzY60LXPHvtl1qq"><img height="56" src="https://ci3.googleusercontent.com/meips/ADKq_Na5-lD0rXWsKspDRNWcxQOfbqwgqPse0pfS7nXN0TLhKuWun9pGWJoCHG7q7wBFS47HzusFKpM3veP8v39uujSUY5Uxlz-vzYdzGD18vBLRQYSbwPiKt2lc2slUd7xY2jY=s0-d-e1-ft#https://cdn.centris.ca/public/qc/consumersite/images/logo-centris-small.png" style="border:0;display:block;outline:0;text-decoration:none;height:56px;width:100%;font-size:13px" width="153" class="CToWUd" data-bit="iit"></a></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="background:#f5f5f5;background-color:#f5f5f5;margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#f5f5f5;background-color:#f5f5f5;width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:20px 0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="center" style="font-size:0;word-break:break-word"><div> <a href="https://www.centris.ca/en/my-searches?utm_source=alert&amp;utm_medium=email&amp;utm_content=unsubscribe" style="display:inline-block;color:#5bb6bd;font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:22px;text-transform:none;padding:15px 10px;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en/my-searches?utm_source%3Dalert%26utm_medium%3Demail%26utm_content%3Dunsubscribe&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw3ATkUVew33YyMO-gDF1soZ">My preferences </a> <a href="https://www.centris.ca/en/my-favourites?utm_source=alert&amp;utm_medium=email" style="display:inline-block;color:#5bb6bd;font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:22px;text-transform:none;padding:15px 10px;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en/my-favourites?utm_source%3Dalert%26utm_medium%3Demail&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw0_kdM0nsU-xhfX1k_DTd8P">My favorites </a> <a href="https://www.centris.ca/en/my-profile?utm_source=alert&amp;utm_medium=email" style="display:inline-block;color:#5bb6bd;font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:13px;font-weight:400;line-height:22px;text-transform:none;padding:15px 10px;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en/my-profile?utm_source%3Dalert%26utm_medium%3Demail&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw09125eYbdcn2hHwiwP3-UP">My profile </a></div></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="background:#fff;background-color:#fff;margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#fff;background-color:#fff;width:100%"><tbody><tr><td style="border:1px solid #ddd;border-bottom:none;direction:ltr;font-size:0;padding:15px 0 0 0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:10px 25px;padding-left:20px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;line-height:1;text-align:left;color:#555">Hello Raj Paul,</div></td></tr><tr><td align="left" style="font-size:0;padding:10px 25px;padding-bottom:0;padding-left:20px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;line-height:1;text-align:left;color:#555">A new property meets your criteria. Check it out below!</div></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="background:#fff;background-color:#fff;margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#fff;background-color:#fff;width:100%"><tbody><tr><td style="border:1px solid #ddd;border-bottom:none;border-top:none;direction:ltr;font-size:0;padding:10px 0;text-align:left"><div class="m_-3521229794677186934mj-column-px-600" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:10px 25px;padding-left:20px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;line-height:1;text-align:left;color:#333">Kirkland, Point Clare, DDO, 3+Br 850k (1)</div></td></tr></tbody></table></div></td></tr></tbody></table></div></span><div style="background:#fff;background-color:#fff;margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#fff;background-color:#fff;width:100%"><tbody><tr><td style="border:1px solid #ddd;border-bottom:none;border-top:none;direction:ltr;font-size:0;padding:10px 20px;text-align:left"><div class="m_-3521229794677186934mj-column-px-150" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td style="vertical-align:top;padding:0;padding-top:8px;padding-right:20px"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:0;word-break:break-word"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:collapse;border-spacing:0" class="m_-3521229794677186934mj-full-width-mobile"><tbody><tr><td style="width:130px" class="m_-3521229794677186934mj-full-width-mobile"><img height="auto" src="https://ci3.googleusercontent.com/meips/ADKq_Na0Hkwy7G8qr-ay71YbZ-P_khNgcdSEKNz9VF44Z042eucPqehF0XYKNB1RVpvF-msDzJ3Pze8kEw6P6inPIeBLasmKhrLc14KZ-bioqDOpQahljNpTzMLWWGEamAfeR0DrOSLpurJUry7g7tjaF6U=s0-d-e1-ft#https://mspublic.centris.ca/media.ashx?id=ADDD250DE41D8AFDDDDDDDDDD2&amp;t=pi&amp;w=320&amp;h=240&amp;sm=c" style="border:0;border-radius:5px;display:block;outline:0;text-decoration:none;height:auto;width:100%;font-size:13px" width="130" class="CToWUd" data-bit="iit"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div><div class="m_-3521229794677186934mj-column-px-430" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td style="vertical-align:top;padding:0;padding-top:5px"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:0;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;line-height:1;text-align:left;color:#333">New property</div></td></tr><tr><td align="left" style="font-size:0;padding:0;padding-top:5px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;line-height:20px;text-align:left;color:#555">3, cercle Maple, Dollard-des-Ormeaux, Neighbourhood East - Centris no. 28815049</div></td></tr><tr><td align="left" style="font-size:0;padding:0;padding-top:5px;word-break:break-word"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:separate;line-height:100%"><tbody><tr><td align="center" bgcolor="#5bb6bd" role="presentation" style="border:none;border-radius:3px;background:#5bb6bd" valign="middle"><a href="https://consumersharingqc.centris.ca/api/Retrieve/eTBNbxIFcFDuFUMFBwIbzWUFVf/?id=28815049&amp;context=AlertViewListingSummary" style="display:inline-block;background:#5bb6bd;color:#fff;font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:120%;margin:0;text-transform:none;padding:10px 25px;border-radius:3px;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://consumersharingqc.centris.ca/api/Retrieve/eTBNbxIFcFDuFUMFBwIbzWUFVf/?id%3D28815049%26context%3DAlertViewListingSummary&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw1SnmMvqHi-Ib2u9AJIP76N">View property</a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><div><div class="adm"><div id="q_33" class="ajR h4"><div class="ajT"></div></div></div><div class="h5"><div style="background:#fff;background-color:#fff;margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#fff;background-color:#fff;width:100%"><tbody><tr><td style="border:1px solid #ddd;border-top:none;direction:ltr;font-size:0;padding:10px 0 10px 20px;text-align:left"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:14px;line-height:1;text-align:left;color:#555"><a href="https://consumersharingqc.centris.ca/api/Retrieve/eTBNbxIFcFDuFUMFBwIbzWUFVf/?id=69101252&amp;context=AlertViewSavedSearch" style="color:#5bb6bd;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://consumersharingqc.centris.ca/api/Retrieve/eTBNbxIFcFDuFUMFBwIbzWUFVf/?id%3D69101252%26context%3DAlertViewSavedSearch&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw0bodz6Wu071L2sPPl6vhvy">View all results for your search Kirkland, Point Clare, DDO, 3+Br 850k</a></div></td></tr></tbody></table></div><div style="height:20px;line-height:20px"> </div><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td style="vertical-align:top;padding:0"><table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"><tbody><tr><td align="center" style="font-size:0;padding:0;word-break:break-word"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:collapse;border-spacing:0"><tbody><tr><td style="width:640px"><a href="https://www.centris.ca/en/real-estate-brokers?utm_source=alert&amp;utm_medium=email" style="color:#5bb6bd;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en/real-estate-brokers?utm_source%3Dalert%26utm_medium%3Demail&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw2EL7VuMlCKmYDYnG8nIO8c"><img height="auto" src="https://ci3.googleusercontent.com/meips/ADKq_NaS5yIq0ZXCqMdnJ7Ze192ckBVM_xKF9QHhxzEdPS79sQaD6RLLs0JmVH8gJf9Y3frlHfD2BG4WqNmgB8LldgihH6C4zYzb1CLH60CVmuKTz4hjU8vYc7o4604lXf5JsFi2cHxInx1NvtS7UPSwIySzwAoETXIrwkUrh04=s0-d-e1-ft#https://cdn.centris.ca/public/qc/consumersite/images/Promotions/banniere-moncourtier-alertes-v3-en.jpg" style="border:0;display:block;outline:0;text-decoration:none;height:auto;width:100%;font-size:13px" width="640" class="CToWUd" data-bit="iit"></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;line-height:1;text-align:left;color:#555">This email may contain confidential and privileged information. Any unauthorized disclosure, copying or use of this email and its contents is prohibited. If you are not the intended recipient, please immediately notify the sender and delete this email.</div></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;line-height:1;text-align:left;color:#555"> You are receiving this email at <font style="display:none">@</font><a href="mailto:rpaul80@gmail.com" target="_blank">rpaul80@gmail.com</a> because you turned on Centris.ca Alerts. <a href="https://www.centris.ca/en/my-searches?utm_source=alert&amp;utm_medium=email&amp;utm_content=unsubscribe" style="color:#5bb6bd;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://www.centris.ca/en/my-searches?utm_source%3Dalert%26utm_medium%3Demail%26utm_content%3Dunsubscribe&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw3ATkUVew33YyMO-gDF1soZ">Set alert preferences </a>or <a href="https://preferences.centris.ca/Centris/Authentication/SignIn?sendtype=Alert&amp;totp=CfDJ8GmhPgeD0ChCkdO2VcIbJ6I12ajO237Tm4xPpZCesLet2x05CA3H5kyeM2la_3HAYaAPfkdaCUcGuQVDuhpohAGfC--xfyVppf2FT6fHwbab3259YPdJ10HV4rrEbYND0i480vgawvrcsvMxUuA2r2uPuhx43kK0scexYMu3xIiqSf-bdZgPnZCUO0atOIlYJMJZFM717Ram2pKtCGQxJd87214ws7jQ0LK8fo3J1YHwDggCjX2_Az5OgAc_y_L9InLvcukZ8z4uLiubr9FCZHzKwrPxIGyqwpzHDaJRtjKPscv-905wC1swfW07q4GLKQ&amp;lang=en" style="color:#5bb6bd;text-decoration:none" target="_blank" data-saferedirecturl="https://www.google.com/url?q=https://preferences.centris.ca/Centris/Authentication/SignIn?sendtype%3DAlert%26totp%3DCfDJ8GmhPgeD0ChCkdO2VcIbJ6I12ajO237Tm4xPpZCesLet2x05CA3H5kyeM2la_3HAYaAPfkdaCUcGuQVDuhpohAGfC--xfyVppf2FT6fHwbab3259YPdJ10HV4rrEbYND0i480vgawvrcsvMxUuA2r2uPuhx43kK0scexYMu3xIiqSf-bdZgPnZCUO0atOIlYJMJZFM717Ram2pKtCGQxJd87214ws7jQ0LK8fo3J1YHwDggCjX2_Az5OgAc_y_L9InLvcukZ8z4uLiubr9FCZHzKwrPxIGyqwpzHDaJRtjKPscv-905wC1swfW07q4GLKQ%26lang%3Den&amp;source=gmail&amp;ust=1724008119725000&amp;usg=AOvVaw2hLLqM1wNSQYnzDB6RbWtq">unsubscribe.</a></div></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:0;padding-top:10px;padding-left:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;font-weight:700;line-height:1;text-align:left;color:#555">Centris Corporation Inc.</div></td></tr><tr><td align="left" style="font-size:0;padding:0;padding-left:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;line-height:1;text-align:left;color:#555">600, chemin du Golf - Montréal, Québec H3E 1A8</div></td></tr><tr><td align="left" style="font-size:0;padding:0;padding-bottom:10px;padding-left:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;line-height:1;text-align:left;color:#555"><a href="mailto:info@centris.ca" style="color:#5bb6bd;text-decoration:none" target="_blank">info@centris.ca</a></div></td></tr></tbody></table></div></td></tr></tbody></table></div><div style="margin:0 auto;max-width:640px"><table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="width:100%"><tbody><tr><td style="direction:ltr;font-size:0;padding:0;text-align:center"><div class="m_-3521229794677186934mj-column-per-100" style="font-size:0;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%"><table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top" width="100%"><tbody><tr><td align="left" style="font-size:0;padding:10px;word-break:break-word"><div style="font-family:Ubuntu,Helvetica,Arial,sans-serif;font-size:12px;line-height:1;text-align:left;color:#555">© Centris 2024. All rights reserved.</div></td></tr></tbody></table></div></td></tr></tbody></table></div></div></div></div></div>
"""


@app.get("/")
async def root():
    agent = get_agent()
    return agent.invoke({"messages": [("human", sample_email_body)]})
